<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.sakila.mapper.BoardfileMapper"> <!-- package -->

	

	<!-- 하나만 삭제 -->
	<delete id="deleteBoardfileOne">
		DELETE FROM boardfile
		WHERE boardfile_id = #{boardfileId}
	</delete>
	
	<!-- 게시글 삭제시 참조되는 모든 파일 삭제 -->
	<delete id = "deleteBoardfileByBoardId"
			parameterType = "int">
		DELETE FROM boardfile
		WHERE board_id = #{boardId}
	</delete>

	<!-- 하나의 게시글에 참조되는 boardfile select -->
	<!-- 
		<테이블 컬럼명과 제네릭타입의 필드명의 불일치를 해결하는 3가지 방법>
		
		1. mybatis 설정 파일 셋팅을 통해서 스네이크표현식을 자동으로 카멜표현식으로... (위험한 방법)
		2. resultMap 을 사용하는 방법
		3. 쿼리에 별명을 사용 (알리아스) ->> 가장 많이 쓰는 방법
		
	 -->
	<select id = "selectBoardfileByBoardId"
			parameterType = "int"
			resultType = "com.gd.sakila.vo.Boardfile"> <!-- resultType : 리턴타입이 아니라 리스트의 제네릭 타입임.. -->
			
		SELECT
		
			boardfile_name boardfileName
			,boardfile_size	boardfileSize
			
		FROM boardfile
		
		WHERE board_id = #{boardID}
		
	</select>
	
	
	<insert id = "insertBoardfile" parameterType = "com.gd.sakila.vo.Boardfile">
		INSERT INTO boardfile(
		
			board_id
			,boardfile_name
			,boardfile_type
			,boardfile_size
		
		) VALUES (
		
			#{boardId}
			,#{boardfileName}
			,#{boardfileType}
			,#{boardfileSize}
			
		) 
	</insert>
	
	
	
</mapper>